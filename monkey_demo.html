<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Monkey Walk & Climb Demo</title>
<style>
  :root{
    --sky:#eafaf1; --ground:#c3e7c6; --btn:#ffb347; --btn2:#ffd37a; --ink:#1f3a2e;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,var(--sky) 0 70%, var(--ground) 70% 100%);
       font-family:ui-rounded,-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink)}
  header{padding:14px 16px;font-weight:900}
  .wrap{max-width:960px;margin:0 auto;padding:0 14px 20px}
  .stage{
    position:relative;height:56vh;min-height:380px;border-radius:16px;overflow:hidden;
    background:linear-gradient(180deg,#dff7e8 0 60%, #a2dbab 60%);
    box-shadow:0 10px 22px rgba(0,0,0,.12);
  }
  .banana{ position:absolute; right:18px; bottom:92px; width:80px; height:80px;
           border-radius:50%; background:#ffe57a; box-shadow:inset 0 0 0 6px #d6b13a, 0 8px 12px rgba(0,0,0,.16); }
  .vine{ position:absolute; right:58px; bottom:100px; width:8px; height:50%; background:#2f7d44; border-radius:8px; box-shadow:0 0 0 6px #d0f1d6 inset;}
  #monkey{ position:absolute; width:160px; left:16px; bottom:18px; filter:drop-shadow(0 8px 14px rgba(0,0,0,.18)); }
  .idle { animation: idleBounce 1.8s ease-in-out infinite; }
  @keyframes idleBounce { 0%{transform:translateY(0)} 50%{transform:translateY(-5px)} 100%{transform:translateY(0)} }
  .walk { animation: walkStep .36s steps(2) infinite; }
  @keyframes walkStep { 0%{ transform:translateY(0) } 50%{ transform:translateY(-1px) } 100%{ transform:translateY(0) } }
  .climb { animation: climbBob .28s linear infinite; }
  @keyframes climbBob { 0%{ transform:translateY(0) rotate(-2deg) } 50%{ transform:translateY(-2px) rotate(2deg) } 100%{ transform:translateY(0) rotate(-2deg) } }
  .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
  button{ background:var(--btn); border:0; border-radius:999px; padding:10px 14px;
          font-weight:800; color:#4d2a00; box-shadow:0 6px 12px rgba(0,0,0,.12); }
  button.secondary{ background:var(--btn2) }
  a.back{display:inline-block;margin-top:12px;font-weight:800}
</style>
</head>
<body>
  <header class="wrap">üêí Monkey Walk & Climb Demo</header>
  <main class="wrap">
    <div class="stage" id="stage">
      <img id="monkey" class="idle" src="assets/images/monkey_standing.png" alt="Monkey">
      <div class="vine" id="vine"></div>
      <div class="banana" id="banana" title="Tap me"></div>
    </div>
    <div class="controls">
      <button id="btnSit">Sit</button>
      <button id="btnStand">Stand</button>
      <button id="btnWalkRight">Walk ‚Üí</button>
      <button id="btnWalkLeft">‚Üê Walk</button>
      <button id="btnClimb" class="secondary">Climb to Banana</button>
      <button id="btnReset" class="secondary">Reset</button>
    </div>
    <a class="back" href="index.html">‚¨ÖÔ∏è Back to main page</a>
  </main>

<script>
const stage  = document.getElementById('stage');
const monkey = document.getElementById('monkey');
const banana = document.getElementById('banana');

let facing = 1; // 1 right, -1 left
let walking = false;

function setSrc(src){ monkey.src = src; }
function face(dir){ facing = dir; monkey.style.transform = `scaleX(${dir})`; }
function stopAnims(){ monkey.classList.remove('walk','climb'); if(!monkey.classList.contains('idle')) monkey.classList.add('idle'); }

function walk(dx=260, ms=1400, dir=1){
  if(walking) return;
  walking = true;
  face(dir);
  monkey.classList.remove('idle','climb');
  monkey.classList.add('walk');
  const startX = monkey.offsetLeft;
  const endX = Math.max(0, Math.min(stage.clientWidth - monkey.clientWidth, startX + dx * dir));
  const dist = Math.abs(endX - startX);
  const duration = ms * (dist / Math.abs(dx || 1));

  const start = performance.now();
  function step(t){
    const p = Math.min((t-start)/duration, 1);
    const ease = 1 - Math.pow(1-p, 3);
    monkey.style.left = (startX + (endX - startX) * ease) + 'px';
    if(p < 1) requestAnimationFrame(step);
    else { walking = false; stopAnims(); }
  }
  requestAnimationFrame(step);
}

function sit(){ setSrc('assets/images/monkey_sitting.png'); stopAnims(); }
function stand(){ setSrc('assets/images/monkey_standing.png'); stopAnims(); }

function resetPos(){
  stand(); monkey.style.left = '16px'; monkey.style.bottom = '18px'; face(1);
}
function climbToBanana(){
  const targetX = stage.clientWidth - 100 - monkey.clientWidth; // near right
  const topY = stage.clientHeight - (banana.offsetTop + 10);

  const go = () => {
    monkey.classList.remove('idle','walk');
    monkey.classList.add('climb');
    const startB = parseFloat(monkey.style.bottom || 18);
    const endB = topY;
    const start = performance.now();
    const ms = 1200;
    function step(t){
      const p = Math.min((t-start)/ms, 1);
      const ease = 1 - Math.pow(1-p, 3);
      monkey.style.bottom = (startB + (endB - startB)*ease) + 'px';
      if(p<1) requestAnimationFrame(step); else stopAnims();
    }
    requestAnimationFrame(step);
  };

  // walk to the vine first
  const startX = monkey.offsetLeft;
  const dist = Math.abs(targetX - startX);
  if(dist < 8){ go(); return; }
  walking = false;
  walk(Math.sign(targetX-startX)*dist, 900, Math.sign(targetX-startX));
  setTimeout(go, 900);
}

// Buttons
document.getElementById('btnSit').addEventListener('click', sit);
document.getElementById('btnStand').addEventListener('click', stand);
document.getElementById('btnWalkRight').addEventListener('click', ()=>walk(+260, 1400, +1));
document.getElementById('btnWalkLeft').addEventListener('click',  ()=>walk(+260, 1400, -1));
document.getElementById('btnClimb').addEventListener('click', climbToBanana);
document.getElementById('btnReset').addEventListener('click', resetPos);

// start
resetPos();
</script>
</body>
</html>
